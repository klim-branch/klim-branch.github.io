<!DOCTYPE html>
<html lang="en">
<head>

  <title>Kun Branch TestBed</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <script>
    // load Branch
    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener banner closeBanner closeJourney data deepview deepviewCta first init link logout removeListener setBranchViewData setIdentity track trackCommerceEvent logEvent disableTracking getBrowserFingerprintId crossPlatformIds lastAttributedTouchData setAPIResponseCallback qrCode".split(" "), 0);

    //Journey Multi session.
    var options = { 
      make_new_link: false,
      enableExtendedJourneysAssist: true, // enable or disable referring Branch link expiry for Journeys Assist
      extendedJourneysAssistExpiryTime : 5000 // TTL value in milliseconds for the referring Branch link. Defaults to 7 days
    };
    
    // init Branch
    branch.init('key_live_en247WNuAOoD1C7iVXzyqhclqrjebrD7'); // Change `key_live_YOUR_KEY_GOES_HERE` to match your Branch Dashboard
  </script>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #eee;
      padding: 10px;
      position: fixed;
      width: 100%;
      z-index: 1001;
      top: 0; /* Adjust as needed */
    }

    nav {
      background-color: #333;
      color: white;
      padding: 15px;
      text-align: center;
      position: fixed;
      width: 100%;
      top: 140px; /* Adjusted to accommodate the header */
      z-index: 1000;
    }

    nav a {
      text-decoration: none;
      color: white;
      margin: 0 15px;
    }

    #menu-icon {
      display: none;
      cursor: pointer;
    }

    @media only screen and (max-width: 600px) {
      nav a {
        display: block;
        margin: 10px 0;
      }

      #menu {
        display: none;
      }

      #menu-icon {
        display: block;
      }
    }

    /* Added padding for the main content */
    main {
      padding-top: 200px; /* Adjusted based on the header and navigation bar heights */
      text-align: center;
    }

    table {
      margin: 0 auto; /* Center-align the table within the main element */
    }

  </style>
</head>
<body>

<div>
  <header>
    <h1>Kun Branch TestBed</h1>
    <h4> This page is in Live key</h4>
  </header>
</div>


<nav>
  <div id="menu-icon">&#9776;</div>
  <div id="menu">
    <a href="index.html">Live Env</a>
    <a href="TestEnv.html">Test Env</a>
    <a href="TestDeeplinkDataParse.html">Deeplink Data Parse</a>
    <a href="ValueInsertJourney.html">Value Inserting</a>
    <a href="#">Event trigger</a>
    <a href="GTMBranchTesting.html">GTM Testing</a>
    <a href="GTMBranchTestingWithoutBranchSDK.html">GTM Testing Separate Branch SDK</a>
    <a href="privacy.html"> Privacy Policy </a>
  </div>
</nav>

<main>
  <div align="center">
<!--      <h2> Testbed Redirection </h2>
      <table border="1">
        <tr>
          <th>Pages</th>
          <th>Description</th>
        </tr>
        <tr>
          <td><a href="TestEnv.html">Test Env</a></td>
          <td> Going to the testing environment</td>
        </tr>
        <tr>
          <td><a href="TestDeeplinkDataParse.html">To Deeplink data parse test</a></td>
          <td>To Deeplink data parse test</td>
        </tr>
        <tr>
          <td><a href="ValueInsertJourney.html">Value Insert Testing</a></td>
          <td>Value Insert Testing</td>
        </tr>
      </table>
    </div>-->

    <div>
      <h2> Link Testing </h2>
      <table border="1">
        <tr>
          <th>Description</th>
          <th>Link inscribed</th>
        </tr>

        <tr>
          <td><a href="https://kun.app.link/GenericTesting">Generic testing link CTA testing Link</a></td>
          <td>https://kun.app.link/GenericTesting</td>
        </tr>

        <tr>
          <td><a href="https://telstra.app.link/accountcontacts">Telstra link CTA testing Link</a></td>
          <td>https://telstra.app.link/accountcontacts</td>
        </tr>

        <tr>
          <td><a href="ValueInsertJourney.html">Value Insert Testing</a></td>
          <td>Value Insert Testing</td>
        </tr>

        <tr>
          <td><a href="https://fwrir.app.link/xk4iKNwpuCb?%243p=a_naver"> Woori Bank Testing Link</a></td>
          <td>https://fwrir.app.link/xk4iKNwpuCb?%243p=a_naver</td>
        </tr>

        <tr>
          <td><a href="https://kunbranchreact.app.link/GenericLink"> React Native Testing</a></td>
          <td>https://kunbranchreact.app.link/GenericLink</td>
        </tr>

        <tr>
          <td><a href="https://klim-branch.github.io/product/36937"> Product Page</a></td>
          <td>https://klim-branch.github.io/product/36937</td>
        </tr>

      </table>
    </div>

    <div>
      <h2> Setting Developer ID </h2>
      <table border="1">
        <tr>
          <td> <button onclick="SetDeveloperIdentityEvent()">Set your Identity</button> </td>
          <td>
            <form>
              <label for="devId">ID:</label><br>
              <input type="text" id="devId" name="devId"><br>
            </form>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <div>
    <h2> Event Testing </h2>
    <button onclick="CommerceEvent()">PURCHASE event</button>
  </div>

</main>


<script>
  document.getElementById('menu-icon').addEventListener('click', function() {
    var menu = document.getElementById('menu');
    menu.style.display = (menu.style.display === 'block' ? 'none' : 'block');
  });
</script>


<script>
  function SetDeveloperIdentityEvent(){

    var userIdentity = document.getElementById('devId');

    if (userIdentity){
      branch.setIdentity(userIdentity.value);
      alert("the developer identity has been set as:" + userIdentity.value )
    }
    else{
      alert("No input found from devId")
    }


  }
</script>


<script>
  function CommerceEvent(){

    alert("Just bought shoes");
    console.log("Prsssed bruh")

    var event_and_custom_data = {
      "transaction_id": "tras_Id_1234",
      "description": "Preferred purchase",
      "registration_id": "12345"
    };

    var customer_event_alias = "my custom alias";

    var content_items = [
      {
        "$content_schema": "COMMERCE_PRODUCT",
        "$og_title": "Nike Shoe",
        "$og_description": "Start loving your steps",
        "$og_image_url": "http://example.com/img1.jpg",
        "$canonical_identifier": "nike/1234",
        "$publicly_indexable": false,
        "$price": 101.2,
        "$locally_indexable": true,
        "$quantity": 1,
        "$sku": "1101123445",
        "$product_name": "Runner",
        "$product_brand": "Nike",
        "$product_category": "Sporting Goods",
        "$product_variant": "XL",
        "$rating_average": 4.2,
        "$rating_count": 5,
        "$rating_max": 2.2,
        "$creation_timestamp": 1499892854966,
        "$exp_date": 1499892854966,
        "$keywords": [ "sneakers", "shoes" ],
        "$address_street": "230 South LaSalle Street",
        "$address_city": "Chicago",
        "$address_region": "IL",
        "$address_country": "US",
        "$address_postal_code": "60604",
        "$latitude": 12.07,
        "$longitude": -97.5,
        "$image_captions": [ "my_img_caption1", "my_img_caption_2" ],
        "$condition": "NEW",
        "$custom_fields": {"foo1":"bar1","foo2":"bar2"}
      },
      {
        "$og_title": "Nike Woolen Sox",
        "$canonical_identifier": "nike/5324",
        "$og_description": "Fine combed woolen sox for those who love your foot",
        "$publicly_indexable": false,
        "$price": 80.2,
        "$locally_indexable": true,
        "$quantity": 5,
        "$sku": "110112467",
        "$product_name": "Woolen Sox",
        "$product_brand": "Nike",
        "$product_category": "Apparel & Accessories",
        "$product_variant": "Xl",
        "$rating_average": 3.3,
        "$rating_count": 5,
        "$rating_max": 2.8,
        "$creation_timestamp": 1499892854966
      }];

    branch.logEvent(
            "PURCHASE",
            event_and_custom_data,
            content_items,
            customer_event_alias,
            function(err) { console.log(err); }
    );

  }
</script>



</body>
</html>
